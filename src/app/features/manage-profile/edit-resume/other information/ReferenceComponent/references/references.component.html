<accordion-main-body
  [accordionName]="t('reference.reference')"
  buttonType="add"
  buttonTitle="{{t('reference.add')}}"
  [isAccordionOpen]="isOpen()"
  [isFormOpen]="isReferencesNewFormOpen()"
  (formToggleEmitter)="referenceCount() < 2 && isReferencesNewFormOpen.set(!isReferencesNewFormOpen())"
  (accordionToggleEmitter)="onExpandClick()"
  *transloco="let t"
>
  @if(isLoading()) {
  <div class="flex items-center justify-center py-[50px]">
    <img [src]="'/images/loading.gif'" alt="Loading..." />
  </div>
  }@else { @if(isInfoAvalable()) {
  <div class="my-5" *ngFor="let ref of referenceData; let i = index">
    <ng-container
      *ngIf="
        referenceCheckingId === ref.referenceId && isReferencesEditFormOpen();
        else readMode
      "
    >
      <!-- Editable mode (same as Training 2 form) -->
      <form class="mt-5 space-y-4" [formGroup]="referenceForm">
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
          <div>
            <label
              class="flex items-center gap-0.5 text-sm font-medium text-slate-700"
            >
              {{t('reference.name')}}<span class="text-red-600">*</span>
            </label>
            <input
              type="text"
              formControlName="name"
              required
              placeholder="{{t('reference.namePlaceholder')}}"
              class="w-full mt-[8px] p-2.5 text-sm text-gray-500 rounded-lg border border-gray-300 focus:border-[#C63C92] focus:ring-1 focus:ring-[#C63C92] h-10"
            />
            <div
              *ngIf="
                referenceForm.get('name')?.touched &&
                referenceForm.get('name')?.errors
              "
            >
              <p
                class="text-red-500 text-xs mt-1"
                *ngIf="referenceForm.get('name')?.hasError('required')"
              >
                {{t('reference.nameRequired')}}
              </p>
              <p
                class="text-red-500 text-xs mt-1"
                *ngIf="referenceForm.get('name')?.hasError('maxlength')"
              >
                {{t('reference.nameMaxlength')}}
              </p>
            </div>
          </div>

          <div>
            <label
              class="flex items-center gap-0.5 text-sm font-medium text-slate-700"
            >
              {{t('reference.designationLabel')}}<span class="text-red-600">*</span>
            </label>
            <input
              type="text"
              formControlName="designation"
              required
              placeholder="{{t('reference.designationPlaceholder')}}"
              class="w-full mt-[8px] p-2.5 text-sm text-gray-500 rounded-lg border border-gray-300 focus:border-[#C63C92] focus:ring-1 focus:ring-[#C63C92] h-10"
            />
            <div
              *ngIf="
                referenceForm.get('designation')?.touched &&
                referenceForm.get('designation')?.errors
              "
            >
              <p
                class="text-red-500 text-xs mt-1"
                *ngIf="referenceForm.get('designation')?.hasError('required')"
              >
                {{t('reference.designationRequired')}}
              </p>
              <p
                class="text-red-500 text-xs mt-1"
                *ngIf="referenceForm.get('designation')?.hasError('maxlength')"
              >
                {{t('reference.designationMaxlength')}}
              </p>
            </div>
          </div>
        </div>

        <div
          class="flex flex-wrap gap-8 items-start mt-4 w-full max-md:max-w-full"
        >
          <div class="flex-1 shrink basis-0 min-w-60 max-md:max-w-full">
            <div class="flex flex-col w-full">
              <label
                class="flex gap-0.5 items-start self-start text-sm font-medium leading-none text-slate-700"
              >
                {{t('reference.organizationLabel')}}<span class="text-red-600">*</span>
              </label>
              <input
                type="text"
                formControlName="organization"
                required
                placeholder="{{t('reference.organizationPlaceholder')}}"
                class="flex gap-2 items-center py-2.5 mt-[8px] w-full text-sm text-gray-500 rounded-lg border border-solid shadow-sm bg-white border-gray-300 px-4 h-10 focus:border-[#C63C92] focus:ring-1 focus:ring-[#C63C92] focus:outline-none transition-colors"
              />
              <div
                *ngIf="
                  referenceForm.get('organization')?.touched &&
                  referenceForm.get('organization')?.errors
                "
              >
                <p
                  class="text-red-500 text-xs mt-1"
                  *ngIf="
                    referenceForm.get('organization')?.hasError('required')
                  "
                >
                  {{t('reference.organizationRequired')}}
                </p>
                <p
                  class="text-red-500 text-xs mt-1"
                  *ngIf="
                    referenceForm.get('organization')?.hasError('maxlength')
                  "
                >
                  {{t('reference.organizationMaxlength')}}
                </p>
              </div>
            </div>
          </div>

          <div class="flex-1 shrink basis-0 min-w-60 max-md:max-w-full">
            <div class="flex flex-col w-full">
              <label
                class="flex gap-0.5 items-start self-start text-sm font-medium leading-none"
              >
                <span class="text-sm leading-[20px] text-slate-700">{{t('reference.emailLabel')}}</span>
              </label>
              <input
                type="text"
                formControlName="email"
                required
                placeholder="{{t('reference.emailPlaceholder')}}"
                class="flex gap-2 items-center py-2.5 mt-[8px] w-full text-sm text-gray-500 rounded-lg border border-solid shadow-sm bg-white border-gray-300 px-4 h-10 focus:border-[#C63C92] focus:ring-1 focus:ring-[#C63C92] focus:outline-none transition-colors"
              />
            </div>
          </div>
        </div>

        <div class="flex flex-wrap gap-8 items-start mt-4 w-full">
          <div class="w-full md:flex-1">
            <app-selectbox
              [options]="relation()"
              [label]="t('reference.relationLabel')"
              [control]="relationControl()"
              [isRequired]="false"
              [placeholder]="t('reference.relationPlaceholder')"
            >
            </app-selectbox>
          </div>

          <div class="w-full md:flex-1 relative">
            <div class="flex-1 shrink basis-0 min-w-60 max-md:max-w-full">
              <div class="flex flex-col w-full">
                <label
                  class="flex gap-0.5 items-start self-start text-sm font-medium leading-none"
                >
                  <span class="text-sm leading-[20px] text-slate-700"
                    >{{t('reference.mobileLabel')}}</span
                  >
                </label>
                <input
                  type="text"
                  formControlName="mobile"
                  required
                  placeholder="{{t('reference.mobilePlaceholder')}}"
                  class="flex gap-2 items-center py-2.5 mt-[8px] w-full text-sm text-gray-500 rounded-lg border border-solid shadow-sm bg-white border-gray-300 px-4 h-10 focus:border-[#C63C92] focus:ring-1 focus:ring-[#C63C92] focus:outline-none transition-colors"
                />
              </div>
            </div>
          </div>
        </div>

        <div class="flex flex-wrap gap-8 items-start mt-4 w-full">
          <div class="w-full md:flex-1">
            <div class="flex flex-col w-full">
              <label
                class="flex gap-0.5 items-start self-start text-sm font-medium leading-none"
              >
                <span class="text-sm leading-[20px] text-slate-700"
                  >{{t('reference.officePhoneLabel')}}</span
                >
              </label>
              <input
                type="text"
                formControlName="officialPhoneNo"
                required
                placeholder="{{t('reference.officePhonePlaceholder')}}"
                class="flex gap-2 items-center py-2.5 mt-2 w-full text-sm text-gray-500 rounded-lg border border-solid shadow-sm bg-white border-gray-300 px-4 h-10 focus:border-[#C63C92] focus:ring-1 focus:ring-[#C63C92] focus:outline-none transition-colors"
              />
            </div>
          </div>

          <div class="w-full md:flex-1 relative">
            <div class="flex-1 shrink basis-0 min-w-60 max-md:max-w-full">
              <div class="flex flex-col w-full">
                <label
                  class="flex gap-0.5 items-start self-start text-sm font-medium leading-none"
                >
                  <span class="text-sm leading-[20px] text-slate-700"
                    >{{t('reference.phoneLabel')}}</span
                  >
                </label>
                <input
                  type="text"
                  formControlName="residentalPhoneNo"
                  required
                  placeholder="{{t('reference.phonePlaceholder')}}"
                  class="flex gap-2 items-center py-2.5 mt-[8px] w-full text-sm text-gray-500 rounded-lg border border-solid shadow-sm bg-white border-gray-300 px-4 h-10 focus:border-[#C63C92] focus:ring-1 focus:ring-[#C63C92] focus:outline-none transition-colors"
                />
              </div>
            </div>
          </div>
        </div>

        <div class="flex flex-wrap gap-8 items-start mt-4 w-full">
          <div class="w-full md:flex-1">
            <div class="flex flex-col w-full">
              <label
                class="flex gap-0.5 items-start self-start text-sm font-medium leading-none"
              >
                <span class="text-sm leading-[20px] text-slate-700"
                  >{{t('reference.addressLabel')}}</span
                >
              </label>
              <div class="w-full mt-[8px]">
                <app-text-editor
                  [label]="''"
                  [type]="'Edit-Resume'"
                  [height]="'112px'"
                  [control]="addressControl()"
                  [placeholder]="t('reference.addressPlaceholder')"
                >
                </app-text-editor>
              </div>
            </div>
          </div>
        </div>

        <div class="mb-3 flex items-center gap-3">
          <button
            (click)="saveTrainingSummary()"
            [disabled]="isSaving"
            class="flex-1 w-full sm:max-w-fit px-5 py-2.5 rounded-lg shadow-skeuomorphic border border-[#ffffff1f] bg-[#C63C92] text-white text-sm font-semibold"
          >
            <span *ngIf="!isSaving">{{t('reference.save')}}</span>
            <span *ngIf="isSaving">{{t('reference.saving')}}</span>
          </button>
          <button
            (click)="closeForm()"
            class="flex-1 w-full sm:max-w-fit px-5 py-2.5 rounded-lg shadow-skeuomorphic border border-[#D0D5D] text-[#344054] text-sm font-semibold"
          >
            {{t('reference.close')}}
          </button>
        </div>
      </form>
    </ng-container>

    <ng-template #readMode>
      <!-- Read-only card like original design -->
      <div class="flex flex-wrap justify-between items-center gap-4">
        <h3 class="text-lg font-semibold text-slate-700">
          {{t('reference.referenceTitle')}} {{ i + 1 }}
        </h3>
        <div class="flex gap-4 items-center">
          <!-- Edit Button -->
          <button
            class="flex items-center gap-1.5 text-[#B32D7D]"
            aria-label="Edit Training 1"
            (click)="editReference(ref)"
          >
            <img src="images/edit-05.svg" class="h-[15px] w-[15px]" />
            <span class="text-sm hidden sm:inline">{{t('reference.edit')}}</span>
          </button>

          <!-- Delete Button -->
          <button
            class="flex items-center gap-1.5 text-slate-600"
            aria-label="Delete Training 1"
            (click)="openDeleteModal(ref.referenceId)"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 16 16"
              fill="none"
              class="w-4 h-4"
            >
              <path
                d="M2 4H3.33333H14"
                stroke="#334155"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M5.33325 4V2.66667C5.33325 2.48986 5.40349 2.32029 5.52851 2.19526C5.65354 2.07024 5.82311 2 5.99992 2H9.99992C10.1767 2 10.3463 2.07024 10.4713 2.19526C10.5963 2.32029 10.6666 2.48986 10.6666 2.66667V4"
                stroke="#334155"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M12.6666 4V13.3333C12.6666 13.5101 12.5963 13.6797 12.4713 13.8047C12.3463 13.9298 12.1767 14 11.9999 14H3.99992C3.82311 14 3.65354 13.9298 3.52851 13.8047C3.40349 13.6797 3.33325 13.5101 3.33325 13.3333V4"
                stroke="#334155"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M6.66675 7.33334V11.3333"
                stroke="#334155"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M9.33325 7.33334V11.3333"
                stroke="#334155"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
            <span class="text-sm hidden sm:inline">{{t('reference.delete')}}</span>
          </button>
        </div>
      </div>

      <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 mt-4">
        <div>
          <p class="text-sm text-gray-500">{{t('reference.nameLabel')}}</p>
          <p class="mt-1 text-sm font-medium text-gray-900">{{ ref.name }}</p>
        </div>
        <div>
          <p class="text-sm text-gray-500">{{t('reference.designationLabel')}}</p>
          <p class="mt-1 text-sm font-medium text-gray-900">
            {{ ref.designation }}
          </p>
        </div>
        <div>
          <p class="text-sm text-gray-500">{{t('reference.organizationLabel')}}</p>
          <p class="mt-1 text-sm font-medium text-gray-900">
            {{ ref.organization }}
          </p>
        </div>
        <div>
          <p class="text-sm text-gray-500">{{t('reference.emailLabel')}}</p>
          <p class="mt-1 text-sm font-medium text-gray-900">{{ ref.email }}</p>
        </div>
        <div>
          <p class="text-sm text-gray-500">{{t('reference.relationLabel')}}</p>
          <p class="mt-1 text-sm font-medium text-gray-900">
            {{ ref.relation }}
          </p>
        </div>
        <div>
          <p class="text-sm text-gray-500">{{t('reference.mobileLabel')}}</p>
          <p class="mt-1 text-sm font-medium text-gray-900">{{ ref.mobile }}</p>
        </div>

        <div>
          <p class="text-sm text-gray-500">{{t('reference.officePhoneLabel')}}</p>
          <p class="mt-1 text-sm font-medium text-gray-900">
            {{ ref.officialPhoneNo }}
          </p>
        </div>
        <div>
          <p class="text-sm text-gray-500">{{t('reference.phoneLabel')}}</p>
          <p class="mt-1 text-sm font-medium text-gray-900">
            {{ ref.residentalPhoneNo }}
          </p>
        </div>

        <div class="sm:col-span-2">
          <p class="text-sm text-gray-500">{{t('reference.addressLabel')}}</p>
          <p class="mt-1 text-sm font-medium text-gray-900" [innerHTML]="ref.address">
        </div>
      </div>
    </ng-template>
  </div>

  <div
    [ngClass]="isReferencesNewFormOpen() ? 'mb-0' : 'mb-5'"
    *ngIf="referenceData.length < 2 && referenceData.length !=0"
  >
    <button
      class="flex overflow-hidden gap-1 justify-center items-center px-3.5 py-2.5 text-sm font-semibold leading-none text-[#B32D7D] bg-white rounded-lg border border-solid shadow-sm border-[#F0B1DE] focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-opacity-50 hover:bg-pink-50 transition-colors"
      aria-label="Add Academic Summary"
      (click)="isReferencesNewFormOpen.set(true)"
    >
      <img src="images/plus.svg" alt="Add" />
      <span class="leading-tight">{{t('reference.add')}}</span>
    </button>
  </div>
  <div class="my-5" [hidden]="!isReferencesNewFormOpen()">
    <h3 class="text-lg font-semibold text-slate-700">{{t('reference.referenceTitle')}} {{ referenceData.length + 1 }}</h3>

    <form class="mt-5 space-y-4" [formGroup]="referenceForm">
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
        <div>
          <label
            class="flex items-center gap-0.5 text-sm font-medium text-slate-700"
          >
            {{t('reference.nameLabel')}}<span class="text-red-600">*</span>
          </label>
          <input
            type="text"
            required
            placeholder="{{t('reference.namePlaceholder')}}"
            formControlName="name"
            class="w-full mt-[8px] p-2.5 text-sm text-gray-500 rounded-lg border border-gray-300 focus:border-[#C63C92] focus:ring-1 focus:ring-[#C63C92] h-10"
          />
          <div
            *ngIf="
              referenceForm.get('name')?.touched &&
              referenceForm.get('name')?.errors
            "
          >
            <p
              class="text-red-500 text-xs mt-1"
              *ngIf="referenceForm.get('name')?.hasError('required')"
            >
              {{t('reference.nameRequired')}}
            </p>
            <p
              class="text-red-500 text-xs mt-1"
              *ngIf="referenceForm.get('name')?.hasError('maxlength')"
            >
              {{t('reference.nameMaxlength')}}
            </p>
          </div>
        </div>

        <div>
          <label
            class="flex items-center gap-0.5 text-sm font-medium text-slate-700"
          >
            {{t('reference.designationLabel')}} <span class="text-red-600">*</span>
          </label>
          <input
            type="text"
            required
            placeholder="{{t('reference.designationPlaceholder')}}*"
            formControlName="designation"
            class="w-full mt-[8px] p-2.5 text-sm text-gray-500 rounded-lg border border-gray-300 focus:border-[#C63C92] focus:ring-1 focus:ring-[#C63C92] h-10"
          />
          <div
            *ngIf="
              referenceForm.get('designation')?.touched &&
              referenceForm.get('designation')?.errors
            "
          >
            <p
              class="text-red-500 text-xs mt-1"
              *ngIf="referenceForm.get('designation')?.hasError('required')"
            >
              {{t('reference.designationRequired')}}
            </p>
            <p
              class="text-red-500 text-xs mt-1"
              *ngIf="referenceForm.get('designation')?.hasError('maxlength')"
            >
              {{t('reference.designationMaxlength')}}
            </p>
          </div>
        </div>
      </div>

      <div
        class="flex flex-wrap gap-8 items-start mt-4 w-full max-md:max-w-full"
      >
        <div class="flex-1 shrink basis-0 min-w-60 max-md:max-w-full">
          <div class="flex flex-col w-full max-md:max-w-full">
            <label
              class="flex gap-0.5 items-start self-start text-sm font-medium leading-none"
            >
              <span class="text-sm leading-[20px] text-slate-700"
                >{{t('reference.organizationLabel')}}</span
              >
              <span class="sr-only">(required)</span>
            </label>
            <input
              type="text"
              required
              aria-required="true"
              placeholder="{{t('reference.organizationPlaceholder')}}"
              formControlName="organization"
              class="flex gap-2 items-center py-2.5 mt-[8px] w-full text-sm text-gray-500 rounded-lg border border-solid shadow-sm bg-white border-gray-300 px-4 max-md:max-w-full h-10 focus:border-[#C63C92] focus:ring-1 focus:ring-[#C63C92] focus:outline-none transition-colors"
            />
            <div
              *ngIf="
                referenceForm.get('organization')?.touched &&
                referenceForm.get('organization')?.errors
              "
            >
              <p
                class="text-red-500 text-xs mt-1"
                *ngIf="referenceForm.get('organization')?.hasError('required')"
              >
                {{t('reference.organizationRequired')}}
              </p>
              <p
                class="text-red-500 text-xs mt-1"
                *ngIf="referenceForm.get('organization')?.hasError('maxlength')"
              >
                {{t('reference.organizationMaxlength')}}
              </p>
            </div>
          </div>
        </div>

        <div class="flex-1 shrink basis-0 min-w-60 max-md:max-w-full">
          <div class="flex-1 shrink basis-0 min-w-60 max-md:max-w-full">
            <div class="flex flex-col w-full max-md:max-w-full">
              <label
                class="flex gap-0.5 items-start self-start text-sm font-medium leading-none"
              >
                <span class="text-sm leading-[20px] text-slate-700">{{t('reference.emailLabel')}}</span>
                <span class="sr-only">(required)</span>
              </label>
              <input
                type="text"
                aria-required="true"
                placeholder="{{t('reference.emailPlaceholder')}} "
                formControlName="email"
                class="flex gap-2 items-center py-2.5 mt-[8px] w-full text-sm text-gray-500 rounded-lg border border-solid shadow-sm bg-white border-gray-300 px-4 max-md:max-w-full h-10 focus:border-[#C63C92] focus:ring-1 focus:ring-[#C63C92] focus:outline-none transition-colors"
              />
            </div>
          </div>
        </div>
      </div>

      <div class="flex flex-wrap gap-8 items-start mt-4 w-full">
        <!-- Institute -->
        <div class="flex-1 shrink basis-0 min-w-60 max-md:max-w-full">
          <div class="flex-1 shrink basis-0 min-w-60 max-md:max-w-full">
            <div class="flex flex-col w-full max-md:max-w-full relative">
              <app-selectbox
                [options]="relation()"
                [label]="t('reference.relationLabel')"
                [control]="relationControl()"
                [placeholder]="t('reference.relationPlaceholder')"
              >
              </app-selectbox>
            </div>
          </div>
        </div>

        <div class="w-full md:flex-1 relative" #container>
          <div class="flex flex-col w-full">
            <label
              class="flex gap-0.5 items-start self-start text-sm font-medium leading-none"
            >
              <span class="text-sm leading-[20px] text-slate-700">{{t('reference.mobileLabel')}}</span>
            </label>

            <div class="relative w-full mt-2">
              <input
                type="text"
                aria-required="true"
                placeholder="{{t('reference.mobilePlaceholder')}}"
                formControlName="mobile"
                class="w-full text-sm text-gray-500 rounded-lg border border-gray-300 shadow-sm bg-white pr-4 h-10 focus:border-[#C63C92] focus:ring-1 focus:ring-[#C63C92] focus:outline-none transition-colors"
              />
            </div>
          </div>
        </div>
      </div>

      <div
        class="flex flex-wrap gap-8 items-start mt-4 w-full max-md:max-w-full"
      >
        <div class="flex-1 shrink basis-0 min-w-60 max-md:max-w-full">
          <div class="flex flex-col w-full max-md:max-w-full">
            <label
              class="flex gap-0.5 items-start self-start text-sm font-medium leading-none"
            >
              <span class="text-sm leading-[20px] text-slate-700"
                >{{t('reference.officePhoneLabel')}}</span
              >
            </label>
            <input
              type="text"
              aria-required="true"
              placeholder="{{t('reference.officePhonePlaceholder')}}"
              formControlName="officialPhoneNo"
              class="flex gap-2 items-center py-2.5 mt-[8px] w-full text-sm text-gray-500 rounded-lg border border-solid shadow-sm bg-white border-gray-300 px-4 max-md:max-w-full h-10 focus:border-[#C63C92] focus:ring-1 focus:ring-[#C63C92] focus:outline-none transition-colors"
            />
          </div>
        </div>

        <div class="flex-1 shrink basis-0 min-w-60 max-md:max-w-full">
          <div class="flex-1 shrink basis-0 min-w-60 max-md:max-w-full">
            <div class="flex flex-col w-full max-md:max-w-full">
              <label
                class="flex gap-0.5 items-start self-start text-sm font-medium leading-none"
              >
                <span class="text-sm leading-[20px] text-slate-700"
                  >{{t('reference.phoneLabel')}}</span
                >
              </label>
              <input
                type="text"
                aria-required="true"
                placeholder="{{t('reference.phonePlaceholder')}} "
                formControlName="residentalPhoneNo"
                class="flex gap-2 items-center py-2.5 mt-[8px] w-full text-sm text-gray-500 rounded-lg border border-solid shadow-sm bg-white border-gray-300 px-4 max-md:max-w-full h-10 focus:border-[#C63C92] focus:ring-1 focus:ring-[#C63C92] focus:outline-none transition-colors"
              />
            </div>
          </div>
        </div>
      </div>

      <div class="flex gap-8 items-start mt-[8px] w-full max-md:max-w-full">
        <div class="flex flex-col w-full max-md:max-w-ful">
          <div class="flex flex-col w-full max-md:max-w-full">
            <label
              class="flex gap-0.5 mb-[8px] items-start self-start text-sm font-medium leading-none"
            >
              <span class="text-sm leading-[20px] text-slate-700">{{t('reference.addressLabel')}}</span>
            </label>
          </div>
          <div class="w-full">
            <app-text-editor
              [label]="''"
              [type]="'Edit-Resume'"
              [control]="addressControl()"
              [height]="'112px'"
              [placeholder]="t('reference.addressPlaceholder')"
            >
            </app-text-editor>
          </div>
        </div>
      </div>

      <div class="mb-3 flex items-center gap-3">
        <button
          (click)="addNewReference()"
          [disabled]="isSaving"
          class="flex-1 w-full sm:max-w-fit px-5 py-2.5 rounded-lg shadow-skeuomorphic border border-[#ffffff1f] bg-[#C63C92] text-white text-sm font-semibold"
        >
          <span *ngIf="!isSaving">{{t('reference.save')}}</span>
          <span *ngIf="isSaving">{{t('reference.saving')}}</span>
        </button>
        <button
          (click)="isReferencesNewFormOpen.set(false)"
          class="flex-1 w-full sm:max-w-fit px-5 py-2.5 rounded-lg shadow-skeuomorphic border border-[#D0D5D] text-[#344054] text-sm font-semibold"
        >
          Close
        </button>
      </div>
    </form>
  </div>
  @if(isDeleteModalOpen()){
  <div
    class="fixed inset-0 bg-[#101828]/50 flex items-center justify-center z-[9999]"
  >
    <div
      class="bg-white w-[476px] h-[216px] p-10 rounded-lg shadow-md flex flex-col justify-between"
    >
      <p
        class="text-primary-900 text-center font-semibold text-[24px] leading-[32px]"
      >
        {{t('reference.deleteTitle')}}
      </p>
      <div class="flex justify-center gap-6 mt-6">
        <button
          (click)="closeDeleteModal()"
          class="px-4 py-2 text-sm rounded-lg border border-[#E4E7EC] bg-white shadow-sm text-primary-900 hover:bg-gray-100"
        >
          {{t('reference.cancel')}}
        </button>
        <button
          (click)="confirmDelete()"
          [disabled]="isSaving"
          class="px-4 py-2 text-sm rounded-lg bg-[#C63C92] shadow-sm text-white hover:bg-pink-700"
        >
          <span *ngIf="!isSaving">{{t('reference.delete')}}</span>
          <span *ngIf="isSaving">{{t('reference.deleting')}}</span>
        </button>
      </div>
    </div>
  </div>
  } 
  }@else { 
    <app-no-details
    (openFormBtn)="openArmyData()"
    [btnText]="t('reference.button')"
    [description]="t('reference.description')"
  ></app-no-details>
  } }
</accordion-main-body>
