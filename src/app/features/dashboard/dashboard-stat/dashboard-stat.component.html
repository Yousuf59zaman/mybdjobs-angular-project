<!-- <half-donut-chart></half-donut-chart> -->
<div>
  <div class="flex items-center sm:justify-start justify-normal w-full sm:w-fit gap-1.5 relative">
    @for(stat of stats; track $index){
    <div class="relative flex flex-col items-center w-full">
      <button class=" text-sm text-primary-700  font-semibold p-2.5 py-1.5 w-full text-nowrap"
        [ngStyle]="{ color: selectedBtn === stat ? '#C63C92' : '' }" (click)="onClickStatChangeBtn(stat)">
        {{ stat | transloco }}
      </button>
      @if(selectedBtn === stat){
      <div class="absolute -bottom-[5px] border-2 border-[#C63C92] w-full rounded-full"></div>
      }

    </div>
    }
  </div>

  <hr class="mt-1 mb-5">

  @if(selectedBtn === 'dashboard.generalStat'){
    <div class="grid grid-cols-2 items-start sm:items-center sm:justify-between gap-2">
      <p class="col-span-1 title-design w-full flex gap-1">
        {{ 'dashboard.exploreMybdjobsStat1' | transloco }}
        <span class="hidden sm:block">{{ 'dashboard.exploreMybdjobsStat2' | transloco }}</span>
        {{ 'dashboard.exploreMybdjobsStat3' | transloco }}
      </p>
      <div class="col-span-1 w-full flex items-center justify-end">
        <div class="w-fit min-w-[135px]">
          <app-selectbox
            [isRequired]="false"
            [options]="filterTimeOptions()"
            [name]="'filteredOptions'"
            [placeholder]="'Select and options'"
            [control]="filterTimeControl"
          ></app-selectbox>
        </div>
      </div>
    </div>
    <div class="sm:flex sm:flex-row sm:items-center flex flex-col gap-4">
      @for(card of statsCards(); track $index){
        <div class="rounded-md flex-1 w-full flex items-center gap-4 py-3"
          [style.borderLeft]="'4px solid '+card.borderColor" [style.backgroundColor]="card.bgColor">
          <img [src]="card.imageUrl" alt="card.imageUrl" class="pl-2.5">
          <div>
            <p class="text-primary-700 text-xs font-medium">{{card.title | transloco }}</p>
            <span class="text-primary-900 font-semibold text-lg mr-1.5">{{card.count}}</span>
            <!-- <img [src]="card.upgrade > 0 ? 'images/trend-up.svg':'images/trend-down.svg'"
              alt="card.upgrade > 0 ? 'images/trend-up.svg':'images/trend-down.svg'" class="inline-block mr-1.5">
            <span class="text-primary-500 text-xs font-medium">{{card.upgrade > 0 ? card.upgrade: -card.upgrade}}</span> -->
          </div>
        </div>
      }
    </div>

    <div class="mt-4 w-full">
      <div class="pl-2.5 py-4 md:p-6 md:pr-4 border border-[#E4E7EC] rounded-2xl">
        <p class="title-design mb-4">Application</p>
        <div class="w-full">
          <line-chart
            [labels]="graphLabelData()"
            [dataPoints]="graphValueData()"
          />
        </div>
      </div>
    </div>

    <div class="sm:flex sm:flex-row flex flex-col gap-4 sm:items-center sm:justify-between  mt-4 ">
      <div class="flex-1 w-full p-3 md:p-4 border border-[#E4E7EC] rounded-2xl max-h-[220px]">
        <div class="flex items-center gap-1.5 relative">
          @for(header of donutChartHeader; track $index){
            <div class="relative flex flex-col items-center">
              <button
                class="text-[10.5px] font-semibold p-1.5 sm:p-2.5 py-1.5 pb-0.5 border-b-2"
                [ngClass]="{
                  'text-[#C63C92] border-[#C63C92]': selectedHeader === header,
                  'text-primary-700 border-white': selectedHeader !== header,
                  'sm:text-xs': activeLanguage() === 'en'
                }"
                (click)="selectedHeader = header">
                {{ header | transloco }}
              </button>
            </div>
          }
        </div>

        <hr class="h-full mb-5">

        @if(selectedHeader === 'dashboard.profileView'){
          <div class="flex-1 h-full flex items-center gap-4 ">
            <div class=" md:max-w-[128px] max-w-[92px] max-h-[92px] md:max-h-[128px]">
              <donut-chart [data]="profileViewDonutData()" [labels]="profileLabel()"></donut-chart>
            </div>
            <div class="self-start w-full min-h-full flex flex-col gap-4">
              @for(section of profileView(); track $index){
              <div class="flex items-center justify-between">
                <div class="flex items-center gap-2">
                  <div [style.backgroundColor]="section.boxColor" class=" w-2 h-2 rounded-sm"></div>
                  <p
                    class="text-primary-900 font-medium text-xs"
                    [ngClass]="{
                      'text-[10.5px]': activeLanguage() === 'bn'
                    }"
                  >{{ section.title | transloco }}</p>
                </div>
                <span
                  [style.color]="section.boxColor"
                  [style.backgroundColor]="section.boxShadow"
                  class="p-1.5 rounded-[50%] text-xs font-medium"
                >
                  {{ section.count > 10 ? section.count : ('0'+section.count) }}
                </span>
              </div>
              }
            </div>
          </div>
        }
        @if(selectedHeader === 'dashboard.emailCV'){
          <div class="flex items-center gap-4 ">
            <div class=" md:max-w-[128px] max-w-[92px] max-h-[92px] md:max-h-[128px]">
              <donut-chart [data]="emailCvDonutData()" [labels]="emailLabel()"></donut-chart>
            </div>
            <div class="w-full flex flex-col gap-4">
              @for(section of emailCv(); track $index){
              <div class="flex items-center justify-between">
                <div class="flex items-center gap-2">
                  <div [style.backgroundColor]="section.boxColor" class=" w-2 h-2 rounded-sm"></div>
                  <p
                    class="text-primary-900 font-medium text-xs"
                    [ngClass]="{
                      'text-[10.5px]': activeLanguage() === 'bn'
                    }"
                  >{{ section.title | transloco }}</p>
                </div>
                <span [style.color]="section.boxColor" [style.backgroundColor]="section.boxShadow"
                  class="p-1.5 rounded-[50%] text-xs font-medium">{{section.count > 10 ?
                  section.count:('0'+section.count)}}</span>
              </div>
              }
            </div>
          </div>
        }
        @if(selectedHeader ==='dashboard.downloadCV'){
          <div class="flex items-center gap-4 ">
            <div class="md:max-w-[128px] max-w-[92px] max-h-[92px] md:max-h-[128px]">
              <donut-chart [data]="downloadCvDonutData()" [labels]="downloadLabel()"></donut-chart>
            </div>
            <div class="w-full flex flex-col gap-4">
              @for(section of downloadCv(); track $index){
              <div class="flex items-center justify-between">
                <div class="flex items-center gap-2">
                  <div [style.backgroundColor]="section.boxColor" class=" w-2 h-2 rounded-sm"></div>
                  <p
                    class="text-primary-900 font-medium text-xs"
                    [ngClass]="{
                      'text-[10.5px]': activeLanguage() === 'bn'
                    }"
                  >{{ section.title | transloco }}</p>
                </div>
                <span [style.color]="section.boxColor" [style.backgroundColor]="section.boxShadow"
                  class="p-1.5 rounded-[50%] text-xs font-medium">{{section.count > 10 ?
                  section.count:('0'+section.count)}}</span>
              </div>
              }
            </div>
          </div>
        }
      </div>

      <div class="flex-1 w-full p-3 md:p-4 border border-[#E4E7EC] rounded-2xl max-h-[220px] ">
        <div class="flex items-center gap-1.5 relative">
          <div class="relative flex flex-col items-center">
            <button
              class="text-[10.5px] text-primary-700 font-semibold p-1.5 sm:p-2.5 py-1.5 pb-0.5 cursor-text"
              [ngClass]="{
                'sm:text-xs': activeLanguage() === 'en'
              }">
              {{ 'dashboard.yourTotalInvitation' | transloco }}
            </button>
          </div>
        </div>

        <hr class="mt-0.5 mb-5">

        <div class="flex items-center gap-4 ">
          <div class=" md:max-w-[128px] max-w-[92px] max-h-[92px] md:max-h-[128px]">
            <donut-chart [data]="invitaionDonutData()" [labels]="invitationLabel()"></donut-chart>
          </div>
          <div class="w-full flex flex-col gap-1.5">
            @for(section of invitationView(); track $index){
              <div class="flex items-center justify-between">
                <div class="flex items-center gap-2">
                  <div [style.backgroundColor]="section.boxColor" class=" w-2 h-2 rounded-sm"></div>
                  <p
                    class="text-primary-900 font-medium text-xs"
                    [ngClass]="{
                      'text-[10.5px]': activeLanguage() === 'bn'
                    }"
                  >{{ section.title | transloco }}</p>
                </div>
                <span [style.color]="section.boxColor" [style.backgroundColor]="section.boxShadow"
                  class="p-1.5 rounded-[50%] text-xs font-medium">{{section.count > 10 ?
                  section.count:('0'+section.count)}}</span>
              </div>
            }
          </div>
        </div>
      </div>
    </div>
  }
  @else {
    <!-- <p>Pro Stat</p> -->
    <div
      class="w-full"
      [ngClass]="{'hidden': !isBdjobsPro()}"
    >  
      <div class="mb-4 grid grid-cols-1 sm:grid-cols-3 gap-2 w-full">
        <div class="col-span-1 w-full flex items-center justify-center">
          @let jobApplicationData = getApplicationProStat('Application Limit');
          @if(jobApplicationData?.featureQuantity != -1) {
            <half-donut-chart
              [used]="jobApplicationData?.totalUsed || 0"
              [total]="jobApplicationData?.featureQuantity || 0"
              title="{{ 'dashboard.jobApplication' | transloco }}"
              subtitle="{{ 'dashboard.jobApplicationDetails' | transloco }}">
            </half-donut-chart>
          } @else {
            <div class="relative border min-h-[134px] h-full w-full border-[#E4E7EC] rounded-lg pb-2.5 px-2 pt-4">
              <div class=" flex flex-col items-center text-center">
                  <p class="sub-title-design">{{ 'dashboard.jobApplication' | transloco }}</p>
                  <p class="text-[11px] text-primary-700">{{ 'dashboard.jobApplicationDetails' | transloco }}</p>
              </div>

              <div class="flex justify-center items-center w-full mt-5">
                <span class="text-lg font-semibold text-[#C63C92]">Unlimited</span>
              </div>
          </div>
          }
        </div>

        <div class="col-span-1 w-full flex items-center justify-center">
          @let boostData = getApplicationProStat('Boosting');
          <half-donut-chart
            [used]="boostData?.totalUsed || 0"
            [total]="boostData?.featureQuantity || 0"
            title="{{ 'dashboard.jobBoost' | transloco}}"
            subtitle="{{ 'dashboard.jobBoostDetails' | transloco }}">
          </half-donut-chart>
        </div>

        <div class="col-span-1 w-full flex items-center justify-center">
          @let messageData = getApplicationProStat('Direct Message');
          <half-donut-chart
            [used]="messageData?.totalUsed || 0"
            [total]="messageData?.featureQuantity || 0"
            title="{{ 'dashboard.directMessage' | transloco }}"
            subtitle="{{ 'dashboard.directMessageDetails' | transloco }}">
          </half-donut-chart>
        </div>

      </div>

      <div class="mb-4 sm:flex sm:flex-row sm:items-center flex flex-col gap-4">
        @for(card of proStatsCards; track $index){
        <div class="flex-1  px-3 py-3.5 rounded-md flex flex-col gap-0.5" [style.borderLeft]="'4px solid '+card.color"
          [style.background]="card.bgColor">
          <div class="flex items-center justify-between">
            <p
              class="text-primary-700 text-xs font-medium"
              [ngClass]="{
                'text-[10px]': activeLanguage() === 'bn'
              }"
            >{{ card.title | transloco }}</p>
            <span class="icon-angle-right-n -rotate-45 cursor-pointer" [style.color]="card.color"></span>
          </div>

          <p class="title-design">{{ card.count }}</p>
        </div>
        }

      </div>

      <div class="flex flex-col gap-3">
        <p class="sub-title-design">{{ 'dashboard.exploreOtherFeatures' | transloco }}</p>
        <div class="sm:grid sm:grid-cols-3 gap-4 grid grid-cols-1">
          @for(feature of otherFeatures; track $index){
          <div class=" bg-[#FFFDFC] p-4 pl-3 flex items-center gap-6 justify-between border border-[#F2F4F7] rounded-lg">
            <div class="flex items-center gap-3">
              <img [src]="'images/'+feature.iconImage+'.svg'" [alt]="feature.iconImage">
              <p class="text-sm font-medium text-primary-900">{{feature.title | transloco }}</p>
            </div>
            <!-- <img [src]="'images/open.svg'" class="cursor-pointer"> -->
          </div>
          }

        </div>
      </div>
    </div>
    <div
      class="w-full max-w-[468px] mx-auto"
      [ngClass]="{'hidden': isBdjobsPro()}"
    >
      <div class="flex overflow-hidden relative gap-6 pt-16 flex-col bg-white rounded-xl max-w-[480px] w-[580px] mx-auto">
        <header class="relative w-full flex justify-center">
          <div
            class="absolute left-1/2 -translate-x-1/2 -translate-y-1/2 rounded-full w-[80px] h-[80px] border border-black border-opacity-20 z-0"
          ></div>
          <div
            class="absolute left-1/2 -translate-x-1/2 -translate-y-1/2 rounded-full w-[140px] h-[140px] border border-black border-opacity-15 z-0"
          ></div>
          <div
            class="absolute left-1/2 -translate-x-1/2 -translate-y-1/2 rounded-full w-48 h-48 border border-black border-opacity-10 z-0"
          ></div>
          <div
          class="absolute left-1/2 -translate-x-1/2 -translate-y-1/2 rounded-full w-60 h-60 border border-black border-opacity-5 z-0"
          ></div>

          <img
            src="images/Unlock_Pro.svg"
            alt="locked profile"
            class="object-contain absolute -top-6 left-2/4 z-10 w-12 h-12 rounded-3xl -translate-x-1/2 aspect-square translate-y-[0%]"
          />
        </header>

        <section class="flex flex-col justify-center items-center self-center w-full mt-4 mb-10">
          <h1 class="text-lg font-semibold text-slate-700 whitespace-nowrap m-0">
          {{ 'dashboard.unlockBdjobsPro' | transloco }}
          </h1>
          <div class="flex items-center -translate-y-[20%]">
            <div class="flex flex-col justify-center text-[14px] mt-2 leading-5 text-gray-500">
            <span
              class="flex items-center gap-1"
              [ngClass]="{
                'text-xs': activeLanguage() === 'bn'
              }"
            >
              <img src="images/bdjobs-pro.svg" alt="pro-badge" class="w-[72px]">
              {{ 'dashboard.unlockBdjobsProDetails' | transloco }}
            </span>
            </div>
          </div>
        </section>

        <footer
          class="flex z-0 gap-4 items-center w-fit mx-auto -translate-y-[90%] text-sm font-semibold leading-none whitespace-nowrap"
        >
          <a
            href="https://mybdjobs.bdjobs.com/bdjobs-pro/bdjobs-pro-package-pricing"
            class="flex overflow-hidden flex-1 shrink gap-1 justify-center items-center self-stretch my-1.5 px-8 py-2.5 text-white bg-[#0DB14B] rounded-lg border-2 border-solid shadow-sm basis-0 border-white border-opacity-10"
            >
            <!-- (click)="onClickGetPro()" -->
            <div class="flex justify-center items-center self-stretch gap-2 px-0.5 py-0">
              <span class="self-stretch text-xs leading-5 text-white">
                Get Bdjobs Pro<!-- {{ 'appliedJobs.boostSuccessModal.confirmText' | transloco }} -->
              </span>
              <span class="icon-angle-right-long text-[11px]"></span>
            </div>
          </a>
        </footer>
      </div>
    </div>
  }
</div>