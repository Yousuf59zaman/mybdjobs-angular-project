<div class="bg-white overflow-hidden rounded-sm mb-5">
    <div class="bg-[#546e7a] h-11 text-white flex items-center px-4 rounded-tl-sm rounded-tr-sm">
        <span class="icon-credit-point-system mr-1"></span>
        <p class="font-semibold text-sm">My Point Dashboard</p>
    </div>

    <div class="mt-6 mx-6">
        <app-progress-bar [TotalPoint]="+totalPoint"></app-progress-bar>
    </div>
    <div class="flex justify-center p-[20px_25px_30px_25px]">
        <form class="w-full" [formGroup]="pointsForm">
            <div class="bg-[#f5f5f5] border border-[#e0e0e0] p-5 rounded">
                <div class="flex flex-wrap gap-4 text-[#595959]">
                    <div class="w-full md:flex-1">
                        <label class="text-[#595959] inline-block mb-2 font-semibold">From Date</label>
                        <app-datepicker [widthClass]="'w-full'" [pickerType]="'calendar'" [control]="fromDateControl()"
                            placeholder="MM/DD/YYYY" [minDate]="minDate">
                        </app-datepicker>
                    </div>

                    <div class="w-full md:flex-1">
                        <label class="text-[#595959] inline-block mb-2 font-semibold">To Date</label>
                        <app-datepicker [widthClass]="'w-full'" [pickerType]="'calendar'" [control]="toDateControl()"
                            placeholder="MM/DD/YYYY" [minDate]="minDate">
                        </app-datepicker>
                    </div>

                    <div class="w-full md:flex-1">
                        <label for="txtStatus" class="text-[#595959] mb-2 inline-block font-semibold">Filter</label>
                        <app-select class="-my-1" [options]="pointType" [falseOption]="false"
                        [placeholder]='"All"'
                            [control]="filterControl()">
                        </app-select>
                    </div>
                </div>

                <div class="w-full text-center">
                    <button
                        class="font-semibold p-[5px_60px] text-[14px] mt-[30px] bg-[#008020] text-white border rounded"
                        (click)="onSearch()">
                        Search
                    </button>
                </div>
            </div>
        </form>
    </div>

    @if (results.length === 0) {
    <app-no-matched-history></app-no-matched-history>
    } @else {
    <div class="p-6">
        <h2 class="font-semibold text-sm text-gray-800 mb-2">All Points History</h2>
        <div class="overflow-x-auto bg-white rounded-md">
            <table class="min-w-full hidden md:table table-auto border-collapse">
                <thead class="bg-gray-300 text-left text-sm">
                    <tr>
                        <th class="w-1/3 px-4 py-3">Date</th>
                        <th class="w-2/5 px-4 py-3 text-center">Activity</th>
                        <th class="w-1/5 px-4 py-3 text-center">Point History</th>
                    </tr>
                </thead>
                <tbody>
                    @for (point of results; track point) {
                    <tr class="border-b border-gray-300">
                        <td class="px-4 py-4 text-sm">{{ point.Date | date:'d MMM yyyy' }}</td>
                        <td class="px-4 py-4 text-sm text-center">{{ point.Activity }}</td>
                        <td class="px-4 py-4 text-sm text-center">{{ point.PointHistory }}</td>
                    </tr>
                    }
                </tbody>
            </table>
            <div class="md:hidden">
                @for (point of results; track point) {
                <div class="border-b border-gray-300 bg-white p-4">
                    <div class="text-sm">{{ point.Date | date:'d MMM yyyy' }}</div>
                    <div class="text-gray-700 mb-1">{{ point.Activity }}</div>
                    <div class="text-gray-600 mb-1">{{ point.PointHistory }}</div>
                </div>
                }
            </div>
        </div>
    </div>
    }
    <app-pagination-table [totalItems]="totalItems" [itemsPerPage]="pageSize" [currentPage]="currentPage"
        (pageChanged)="onPageChange($event)">
    </app-pagination-table>
</div>